import Pesel
import Testing

@Suite
struct PeselTests {
  @Test(arguments: valid)
  func expectValidPeselNumber(_ rawValue: String) throws {
    #expect(throws: Never.self) {
      try PESEL(rawValue)
    }
  }
  
  @Test
  func expectedToDetectInvalidDateFailure() {
    let failure = #expect(throws: PESEL.Failure.self) {
      try PESEL("00000000000")
    }
    #expect(failure == .invalidDate(0, 0, 0))
  }
  
  @Test
  func expectedToDetectInvalidChecksum() {
    let failure = #expect(throws: PESEL.Failure.self) {
      try PESEL("01234567890")
    }
    #expect(
      {
        switch failure {
        case .invalidChecksum:
          true
          
        default:
          false
        }
      }()
    )
  }
  
  @Test(arguments: invalid)
  func expectedToDetectInvalidFormat(_ rawValue: String) {
    let failure = #expect(throws: PESEL.Failure.self) {
      _ = try PESEL(rawValue)
    }
    #expect(
      {
        switch failure {
        case let .invalidFormat(capturedRawValue):
          rawValue == capturedRawValue
          
        default:
          false
        }
      }()
    )
  }
}

extension PeselTests {
  private static let invalid = #"""
  Mock
  O1234567890
  78812381*1d
  
  """#
  .split(separator: "\n")
  .map(String.init)
  
  private static let valid = """
  55030101230
  96311856924
  46052869554
  69251464694
  36061194286
  34122195229
  47080662456
  15050434888
  92272329484
  52231934348
  28102943423
  95211639491
  46051255761
  74021946812
  57270626612
  44301234382
  02030295546
  44101124768
  02280845391
  01290371791
  39312289456
  38050448938
  45221638885
  62062011129
  20051175722
  40071153922
  45013162341
  73060543536
  46221077911
  96272293145
  72290913827
  19120649383
  44061377596
  90123058921
  89252462347
  93282954952
  75212812448
  69082835195
  12022616356
  28041819951
  84230769951
  15241733318
  35010339262
  08250378267
  85082913965
  93312187527
  99070351435
  66270717718
  85241434458
  15281344455
  07290273811
  68042667726
  73230598911
  52111939515
  67101571224
  15022789945
  83112981416
  04220493929
  89222383672
  67322441522
  47111193395
  89242823398
  62111638611
  26301384151
  32242937626
  60320967614
  49260239195
  02070372494
  95292395873
  97262672241
  00462211493
  82102717853
  89103046171
  90281981354
  19030259843
  89300541248
  40220243393
  97021981412
  78020115785
  10051393448
  65120497259
  38280957835
  24092982521
  20270652116
  89301789241
  35260888729
  17300941522
  25320655259
  76311733913
  06101071648
  49080956438
  85310329461
  90120593179
  23071937486
  29112971961
  74122953722
  45092768218
  82291747329
  86272823598
  27250642882
  18042512731
  72232355586
  90322637534
  00070675685
  20232525254
  11112411833
  04103048268
  97232858464
  96030433693
  04322955321
  04121891495
  99030693122
  16012755535
  16303174221
  09270155898
  60290342158
  10021142797
  92032939151
  07262249745
  81011748459
  50232048569
  85012136367
  14042362154
  81051741661
  97251528818
  35300262845
  97222883351
  74301281855
  51282676386
  06252099717
  99302234916
  80022358532
  04121658687
  51040366896
  29221012669
  55102391772
  06090845912
  00470299115
  53091976172
  87272694418
  52301718748
  18322972246
  81052425223
  68311271142
  16263033132
  26081951273
  69240491294
  16281376392
  98082382628
  19310384568
  57322697863
  86280136734
  96010655457
  77061841129
  56283173894
  37102194814
  41210314145
  21081514554
  08221758425
  83251893221
  46021354474
  76110217522
  69222843219
  02222153357
  76051042119
  75051556343
  58311787444
  84040552945
  98271322244
  68252782912
  37122465789
  86250193514
  27212486789
  66051557847
  46120912476
  33252486623
  99291535922
  58072415828
  52042063262
  88011043874
  00230812833
  83290883674
  44321775344
  42303112596
  06321178121
  83290736835
  30301186262
  06020332198
  58050198992
  06082579713
  87290747813
  37050334951
  98210956893
  87280695115
  28320357398
  35283196133
  76050656133
  73092914957
  16290195197
  05322047584
  78072022521
  83062752942
  99220493291
  56280815326
  38011487262
  70303135598
  79231547978
  18092318943
  16010732422
  62062958763
  20242618795
  61091784174
  89121371811
  21272561529
  44282846499
  49311836818
  43242747775
  79022646433
  82300111853
  00510311834
  81301297968
  79230687251
  10290436823
  89212072454
  51272586213
  01233079386
  09062579361
  97070956384
  12071886999
  98262469866
  58100299318
  04322232491
  38210733476
  56211899333
  16020726356
  46083155758
  71013152798
  28090748521
  58261145617
  47090292731
  71222384111
  63110315527
  64210973518
  26021583454
  37300388831
  22062893682
  68092722738
  63260487754
  99021018914
  49040788721
  80080756574
  18321533859
  44111058796
  80092068333
  82092625563
  75280811927
  81090699952
  87232576994
  85011592339
  52102481218
  26092792616
  06061427367
  40081073823
  86042097826
  93321319272
  58050475734
  00210872556
  77262136851
  47060267253
  72262625963
  43020275351
  10110333198
  64302362192
  05100682747
  29320191519
  38013015313
  29103041196
  87111845588
  42051488639
  36282688555
  72322366674
  87121896516
  62281255821
  50011282463
  26011756581
  45082551374
  28280339847
  18251887187
  67052666415
  12321618297
  91050886757
  58260617746
  21281097262
  86031475871
  96113013819
  74212053721
  61102888277
  69261834465
  79032475834
  45041562689
  86292383265
  09011683668
  35071944151
  43310267136
  92120799715
  51270123728
  49121536713
  86241836684
  23221432722
  28011761125
  24240757571
  43110699757
  93302051975
  03100491741
  56250123653
  68321588915
  45011312434
  08082943963
  50260946817
  16061083225
  60290734247
  22121171869
  29071724297
  96042534713
  34062765483
  19032997529
  21321668294
  07012318123
  12112571255
  06281563896
  34212933173
  54250871231
  51050652648
  02111462371
  08121791519
  88070922969
  07093037346
  14313082536
  78302346128
  09060956898
  17282276919
  79121398952
  15210685132
  86262462866
  19290592681
  06080355544
  69022822438
  31300939851
  96252936642
  78231873724
  20091861551
  53121938826
  45062072848
  67242342518
  75270188321
  70301244216
  83022261587
  58030953821
  80261872125
  97311125786
  48220383879
  56301471364
  94020481219
  80210292255
  09281936295
  41010234377
  87121586246
  01101621718
  49261282727
  51221023787
  29302537979
  69280653698
  29082699142
  26222382225
  77281365733
  23050195188
  83241526856
  05211921728
  83291553116
  27282078886
  21121583896
  06221471979
  21081059587
  89251455348
  08032549126
  04101224172
  33230637562
  29101035441
  38060165917
  57071051525
  83301321634
  76262751352
  78220395185
  62221731561
  69321892569
  94061693785
  88282315825
  00292417414
  60081425581
  78210168795
  55041179765
  54271989179
  34121964394
  73090823596
  12091546769
  84111054262
  76112911295
  75040278593
  03301981175
  77301811475
  27300679428
  23110126279
  34041896618
  70020969784
  00050349564
  32050966225
  77211138675
  70110414347
  24313046391
  67252411479
  49051054293
  95111823936
  87120461638
  62230336218
  10122415855
  03090178198
  59060481946
  34262474367
  23070719984
  37211031927
  07311392749
  46111191655
  52111685256
  19080441896
  35263031773
  63042421521
  58240179527
  18242731163
  78271142217
  99212321168
  92071037922
  48252687554
  49072599265
  21070781143
  17311613234
  50220947494
  30083065739
  40233049447
  66010374638
  26090739563
  96280226874
  84062014513
  60322339767
  52081487753
  46280929543
  75082723767
  09270788632
  85302159647
  83211381326
  13031991829
  84272741775
  28072692635
  36301947818
  22050958836
  54322626327
  72253033557
  81262418916
  70042128419
  24102721515
  73321978426
  20221872561
  01121545379
  51061966318
  03021019417
  21311898159
  39281941986
  61031791895
  89252668781
  21061457284
  49032458674
  52062045796
  35282985242
  76252151731
  88040668253
  35021041976
  73310391669
  36071917572
  41030744414
  01272398752
  43222656396
  22282563123
  90221038685
  35280912325
  75051634915
  38092891219
  18122134985
  62232989544
  34222334937
  37261314678
  25310198326
  75060869243
  96111338394
  74102569653
  94071938753
  81123156436
  86021989728
  55052385751
  80041152665
  56101728934
  88081564118
  96092599476
  01230163172
  52062947623
  70121249286
  96061882345
  75012774759
  74051957161
  75121535117
  61110948916
  88082244523
  02251728397
  95011256322
  76011347562
  82030661857
  77052097573
  87110492132
  56031769128
  08220789563
  67091996113
  87102435141
  66032087138
  96061513849
  96073088726
  51052367834
  76042572661
  98052771377
  01260294714
  95062279264
  78081359414
  55011529536
  09211195145
  60072645923
  07211015164
  65101142477
  74123085644
  51120146828
  95102529687
  50021957575
  94112663721
  61111529486
  86101194578
  60042222749
  52072183862
  62041987265
  91052411348
  62101399991
  83012211116
  02261169788
  50070178954
  77042441494
  04212797792
  88040648837
  93062374194
  73030665873
  81082928613
  73070586679
  68072064588
  78112124831
  84010211399
  69091838213
  91072049752
  00241825396
  52103017214
  62012048755
  09282781757
  80073138963
  69100541251
  84021237391
  04262969367
  54021462637
  66080284143
  92032024846
  60080418513
  05302978981
  58073142327
  79080145367
  51031864842
  73090153732
  87071696279
  89062282849
  75041752199
  54101384882
  70090553968
  99021045682
  62022441757
  90121387687
  08262195661
  93081263516
  86111818967
  98052138714
  95060281162
  03212063588
  07292287342
  92112488366
  06270741526
  94011498484
  01271513468
  80121079235
  82090683561
  05260715998
  01210334428
  75020628952
  62100287242
  51011621827
  98112475294
  75062948999
  92022794913
  03320776855
  76081668277
  71092452545
  96040149876
  51102872149
  79100854615
  74070564234
  03242497223
  59070561634
  53021865518
  63083037716
  56051161229
  90081281946
  54072341293
  99072486199
  98100487665
  67120957591
  89052354817
  89010991793
  86112667966
  67090416559
  84071643362
  75071135531
  04211433158
  00280136693
  59070836785
  79091142364
  88082674155
  88031985248
  56030475158
  70100821122
  96051639861
  67022247174
  02280843443
  81112973473
  82071681948
  03212553665
  52122526122
  02222071439
  93092246858
  73071411545
  04283156915
  97021126987
  02231138822
  89101276169
  51050274167
  89101726688
  64092785793
  63120864442
  85053043424
  96011074794
  88091051477
  76030787992
  94022692291
  82092312597
  58072464556
  97090948132
  06281549537
  61072869665
  99091037497
  67121272837
  56121493665
  50032392938
  50081294465
  50012295352
  77123124117
  74052091682
  91122168745
  08230719884
  73042351232
  85091827219
  85103015432
  96111662794
  78080635249
  77041323296
  83092242244
  70090729884
  96071225134
  60072033483
  75072867899
  04220847339
  81010295136
  09320193674
  56050694296
  84050243691
  92033044285
  09212514598
  06232042553
  72020939383
  78093045538
  09280425532
  89071796157
  07300595661
  87112914331
  65102994295
  82122298565
  02260247375
  08250798513
  83010366245
  76033049716
  63032699523
  52102299543
  89112197367
  72071585441
  59110952989
  68052144754
  60071658227
  64032293878
  03253096958
  68102735714
  76110591125
  81081812182
  61111591786
  75093017264
  01320476119
  72120396914
  69040315154
  97083148323
  79110477846
  06282277419
  85091148316
  92042339952
  57053124812
  60071282895
  83101195981
  73091736297
  53062724122
  89061166933
  52053094545
  77010323713
  63050559153
  55122061231
  54122234638
  81091514382
  96092922346
  01292868262
  96053151855
  95092047552
  63070877426
  90040358184
  51100141661
  82102861484
  04222054225
  85062769366
  73042913869
  80031311559
  78091539635
  65093098239
  58052744399
  88010825341
  78071195523
  93101496487
  56050356189
  88080497145
  76122927738
  64052689888
  85090989118
  96120253321
  71010575897
  56013066641
  93112743985
  75091098636
  73052675272
  09320341589
  76022474589
  02262196738
  67080991767
  59012851412
  04233126171
  89012685883
  71041347423
  07302379434
  76120416656
  56040741324
  67022457386
  65101986394
  04251857754
  88011682495
  67080413371
  63083153463
  06312496452
  57121696775
  71050672512
  60060796729
  59060968782
  67101964222
  79061783335
  78041011273
  69070958314
  66020885294
  02270834617
  64011995212
  98100182218
  84090141122
  80100849675
  50082568781
  64041956887
  62092481497
  82090172616
  56071982279
  57072119824
  57071763338
  87120955368
  00221233331
  71030749157
  74101482588
  57051161981
  90103048537
  52022163236
  08231744146
  60071998695
  95011852948
  00293091598
  84080687179
  74092268954
  52090996936
  70051253931
  64092991628
  71060798246
  79120295854
  04241685688
  74082783768
  95012922624
  05231398337
  99112382676
  74041236638
  94112937246
  94071896363
  04260923248
  87012633561
  60091919311
  90080746426
  51072676297
  97040896843
  87021189187
  98080452413
  70102477819
  09222774539
  90091161111
  02322692455
  57122996416
  02301582287
  97061937318
  68120612729
  03251883561
  53031153737
  65081696919
  55111546761
  76111745936
  95082979319
  75012579477
  69010177331
  67041264583
  82080922616
  93072832882
  08220137274
  63122715272
  78021055253
  93031899754
  81110248212
  00230511138
  54033088951
  92051461471
  90073165463
  79070537127
  89052451637
  66101791647
  75111273344
  07270198882
  60082635136
  08281786893
  78061924861
  03291181991
  91022573526
  51062389383
  52121756126
  78122347675
  59091685847
  86042338592
  52083134448
  06231648828
  53040358479
  04261914672
  77111852633
  72092687267
  98091722262
  75051447764
  63082157963
  81100676971
  73011433967
  62030494628
  73082777441
  00311692857
  96090794316
  69123051135
  74122165752
  61120138482
  99062372576
  75040393614
  66032993475
  02281089659
  60022871644
  57102089527
  90061195425
  66061251544
  92043048792
  95122235588
  91041069183
  71101227559
  52041124269
  59101952956
  77122652288
  74092296432
  05280717732
  57100717822
  70091266948
  02240141929
  85111293257
  98012171166
  97092199512
  71101424987
  79091925688
  03230449535
  03323166468
  62022074362
  87022423534
  66111115721
  91121933441
  62022137797
  02231759197
  90122041779
  92030385138
  06250611382
  84031372167
  84060876863
  87052066794
  86100854156
  98090743246
  60112621258
  06222644648
  93032415856
  85091631878
  76012085294
  55011295921
  98100674151
  82102855683
  53100795673
  72101415333
  70042076422
  91092036857
  61012418726
  50011436312
  51042637514
  50060411874
  53011655466
  70100174923
  57080637239
  89092234153
  96092549143
  98070952998
  01282254231
  60083179761
  01221287672
  61041452856
  78022091991
  80101179353
  72110882836
  89032076621
  75091153919
  06222479747
  88032335974
  93100157417
  76012444978
  89072494634
  73020235172
  88092588842
  56110198881
  00222339388
  02220982568
  05212761152

  62122552553
  51102313918
  65012028897
  """
  .split(separator: "\n")
  .map(String.init)
}
